<?php // This file is protected by copyright law and provided under license. Reverse engineering of this file is strictly prohibited.




































































































$jmAnv42662353usZMr=433123596;$fposV83806153xomKl=982500428;$pjTCJ74852295MWaQx=429465149;$Gvhkk41113281RNzyH=803236512;$QwAFf52901611gENFq=636533264;$hDWPa45529785GHqzh=959574158;$vtVxs89310303jIVyp=305077942;$BYkNU29555664dJIFV=702263367;$jOeBu26578369itWLo=683849182;$oeTaj15690918xpQYw=281054138;$iqmKC67205811kyMFl=24596984;$yzXrm26435547gaArD=944696473;$vxnBV53692627JNEPE=575071350;$eAxzY84289551knNvW=944940369;$segXb98538819CCmYv=587022278;$kJfWS31752929nFrBc=531535828;$ykuFL44244385wpeGi=310199768;$XhXJv71325684gYxZJ=953232850;$MogCB93309327semmX=993353821;$dLcdI45507812ZykvJ=461781433;$jiMmv88233643rHwNB=888234436;$KgubK66799317ERFXP=305931579;$uzmHv51517334nEVnR=244591614;$ajhbV67700195QjamG=735433289;$Airqi95660401DPbjM=311175354;$QZrQm70710449wzoQs=2036560;$LPVnZ63162842dxAEn=338735657;$zxDCP98330079akboE=353491394;$VhaxS66524658gVaUj=577022522;$hrJCK83059082JwmLL=41547790;$GtTwg38245849XRjKR=276785949;$zutJX47397461ceWcw=314955749;$nbZYn90826416bWJtK=686775940;$MAuOv13845214OWFQG=424465271;$fTncO66766358ptyNC=58742492;$sntCT94902344LKRhk=619826355;$mJUOt78565674amTIx=640435608;$PkkJY43068848FZrCT=151789001;$fpRIq58724365lBvsb=683605286;$hxFcJ60844727ljRLi=269103210;$NiRTP29742431NGXfd=438001526;$sleoj80729981orfXu=222518982;$HAZKs14119873VokGk=153374328;$oCjha35224609VYEJG=261786316;$VUJsk34356689dcOev=79473693;$NHTBs36828613JyQna=636655213;$LIcIU22952881zKmdl=466049622;$wwznb18041992ZDmau=597875671;$spiVH92408448zzCZG=563852112;$RVArC91364746ENLId=395197693;?><?php echo 'Creating HTML sitemap...<div id="percprog2"></div>';flush(); $LG9QHtb6yK6qR5InZ = $grab_parameters['xs_initurl']; if(substr_count($LG9QHtb6yK6qR5InZ,'/')>2) $LG9QHtb6yK6qR5InZ = substr($LG9QHtb6yK6qR5InZ, 0, strrpos($LG9QHtb6yK6qR5InZ,'/')); $fqxdyrTNEz= ''; $kgQxFsRGfcjLoo9_ = array(); $o6tTsvNFXN = 0; $n5r9fzJl7ca= ceil(count($urls_completed) / $grab_parameters['xs_htmlpart']); $QcR_wuGxkDyfpHas7TL = intval($F7FR0DideE_fz_9txX['istart']); if($F7FR0DideE_fz_9txX) { $o6tTsvNFXN = $F7FR0DideE_fz_9txX['curpage']; } $baLr5ayef=$aBb5M7SvBOsEIqI7t=$PaHAdHXyU_QJd4=array(); for($i=0;$i<count($urls_completed);$i++){ if($grab_parameters['xs_memsave']) { $cu = xn22ZOg5Ng($urls_completed[$i]); }else $cu = &$urls_completed[$i]; if(!is_array($cu)) $cu = @unserialize($cu); iRDSo8Ka5xIhzQ($cu); if($i%100 == 0){ W5mf7Y9Huk0KaQU6(); fTr9xtaaPTXU(" / $i / ".(time()-$_tm)); $_tm=time(); } } function iRDSo8Ka5xIhzQ($ur){ global $baLr5ayef,$aBb5M7SvBOsEIqI7t,$YIrFdD7SrWLpwW3,$LG9QHtb6yK6qR5InZ,$grab_parameters; $ByzJ33WTH1 = str_replace($LG9QHtb6yK6qR5InZ,'', $ur['link']); $ByzJ33WTH1 = preg_replace('#\?.*#', '', $ByzJ33WTH1); for($i=0;$i<count($YIrFdD7SrWLpwW3);$i++) if(preg_match('#'.$YIrFdD7SrWLpwW3[$i].'#',$ByzJ33WTH1)){ $aBb5M7SvBOsEIqI7t['elem'][$YIrFdD7SrWLpwW3[$i]]['cnt']++; $aBb5M7SvBOsEIqI7t['tcnt']++; break; } $bnZYuKhrboQQ3 = &$baLr5ayef; $qNmmXd_uegk0tE9Fi = $ByzJ33WTH1; $lv = 0; if($grab_parameters['xs_htmlstruct']==2) { $ns = 'Sitemap'; $bnZYuKhrboQQ3 = &$bnZYuKhrboQQ3['elem'][$ns]; $bnZYuKhrboQQ3['tcnt']++; }else if($grab_parameters['xs_htmlstruct']==1) { $ns = substr($ByzJ33WTH1,0,strrpos($ByzJ33WTH1,'/')); $bnZYuKhrboQQ3 = &$bnZYuKhrboQQ3['elem'][$ns]; $bnZYuKhrboQQ3['tcnt']++; } else while(($ps=strpos($ByzJ33WTH1,'/'))!==false){ $ns = substr($ByzJ33WTH1,0,$ps+1); $bnZYuKhrboQQ3 = &$bnZYuKhrboQQ3['elem'][$ns]; $bnZYuKhrboQQ3['tcnt']++; $ByzJ33WTH1 = substr($ByzJ33WTH1,$ps+1); } $bnZYuKhrboQQ3['cnt']++; $bnZYuKhrboQQ3['pages'][] = $ur; } function Zq0MnQmsD6T2lLLfU($sk,$d1gUNMW50DG,$ZbmgwPpRiaBbjR9P,$lKYJ6QOoLtm8_Ze4uz3) {                $lKYJ6QOoLtm8_Ze4uz3 = "<table>\n".$lKYJ6QOoLtm8_Ze4uz3."\n</table>"; return " <tr valign=\"top\">". str_repeat("\n<td class=\"lbullet\">&nbsp;&nbsp;&nbsp;&nbsp;</td>",$ZbmgwPpRiaBbjR9P)." <td class=\"lpart\" colspan=\"".(100-$ZbmgwPpRiaBbjR9P)."\"><div class=\"lhead\">$sk <span class=\"lcount\">".$d1gUNMW50DG." pages</span></div> $lKYJ6QOoLtm8_Ze4uz3 </td> </tr> "; } function Tqxf4L13C0B33yiyrv($a, $b) { global $grab_parameters, $rCRb02h4n8Q; if(($GLOBALS['_iter']++ %100) == 0){ fTr9xtaaPTXU(" / ".$GLOBALS['_iter']." / ".(time()-$_tm)); $_tm=time(); W5mf7Y9Huk0KaQU6(); } $at = is_array($a)?($a['t']?$a['t']:$a['link']):$a; $bt = is_array($b)?($b['t']?$b['t']:$b['link']):$b; if($grab_parameters['xs_htmlsort'] == 3) { if(!$rCRb02h4n8Q)$rCRb02h4n8Q=rand(1E10,1E12); $at = md5($at.$rCRb02h4n8Q); $bt = md5($bt.$rCRb02h4n8Q); } if ($at == $bt) { return 0; } $rs = ($at < $bt) ? -1 : 1; if($grab_parameters['xs_htmlsort'] == 2)$rs = -$rs; return $rs; } function LDd7bqg5_C($sl,$ZbmgwPpRiaBbjR9P=0,&$w1CLxCPhUy9qzof){ global $sfFw7CUsV, $grab_parameters, $fqxdyrTNEz, $kgQxFsRGfcjLoo9_, $o6tTsvNFXN, $urls_completed, $QcR_wuGxkDyfpHas7TL, $hf9XRbEeY5Kx6GFPKr; $vkXiWiWO6 = ''; if($grab_parameters['xs_htmlsort']) { fTr9xtaaPTXU("sorting.."); @uksort($sl, 'Tqxf4L13C0B33yiyrv'); } $ls = $ZbmgwPpRiaBbjR9P*2; if(is_array($sl)) foreach($sl as $sk=>$sn){ $lKYJ6QOoLtm8_Ze4uz3 = ""; if(($GLOBALS['_iter']++ %100) == 0){ fTr9xtaaPTXU(" / ".$GLOBALS['_iter']." / ".(time()-$_tm)); $_tm=time(); W5mf7Y9Huk0KaQU6(); } $Y31Y74dyLIO=array(); if(is_array($sn['pages'])) { if($grab_parameters['xs_htmlsort']) { fTr9xtaaPTXU("sorting.."); @usort($sn['pages'], 'Tqxf4L13C0B33yiyrv'); } foreach($sn['pages'] as $pg) { $w1CLxCPhUy9qzof++; if($w1CLxCPhUy9qzof<=$QcR_wuGxkDyfpHas7TL)continue; $t = $pg['t'] ? $pg['t'] : basename($pg['link']); $Y31Y74dyLIO[] = array ( 'link'=>$pg['link'], 'title'=>$t, 'desc'=>$pg['d'], 'title_clean'=>str_replace('&amp;amp;', '&amp;',htmlspecialchars($t)), 'file'=>basename($pg['link']) ); $lKYJ6QOoLtm8_Ze4uz3 .= "\n<tr><td class=\"lpage\"><a href=\"".$pg['link']."\" title=\"".str_replace('&amp;amp;', '&amp;',htmlspecialchars($t))."\">".$t."</a></td></tr>"; if($w1CLxCPhUy9qzof%10==0) aRjeSjk24(array( 'cmd'=> 'info', 'id' => 'percprog2', 'text'=> number_format($w1CLxCPhUy9qzof*100/count($urls_completed),0).'%' )); if(($w1CLxCPhUy9qzof%$grab_parameters['xs_htmlpart'])==0) { $fqxdyrTNEz .= Zq0MnQmsD6T2lLLfU($sk,$sn['cnt'],$ZbmgwPpRiaBbjR9P,$lKYJ6QOoLtm8_Ze4uz3); $kgQxFsRGfcjLoo9_[] = array ( 'folder' => str_replace('/',' ',$sk), 'cnt' => $sn['cnt'], 'cntmulti' => $sn['cnt']>1, 'level' => $ZbmgwPpRiaBbjR9P, 'alevel' => $ZbmgwPpRiaBbjR9P ? range(1,$ZbmgwPpRiaBbjR9P) : array(), 'level100' => 100-$ZbmgwPpRiaBbjR9P, 'pages' => $Y31Y74dyLIO ); $lKYJ6QOoLtm8_Ze4uz3='';     $Y31Y74dyLIO=array(); lPT6M7drPhQPL($fqxdyrTNEz, $kgQxFsRGfcjLoo9_); $o6tTsvNFXN++; $fqxdyrTNEz='';$kgQxFsRGfcjLoo9_=array(); m0HngeVPuiULaXDb($hf9XRbEeY5Kx6GFPKr,wJu5NxAjkFkQBpMse(array('istart'=>$w1CLxCPhUy9qzof,'curpage'=>$o6tTsvNFXN))); } } } if($lKYJ6QOoLtm8_Ze4uz3) { $fqxdyrTNEz.=Zq0MnQmsD6T2lLLfU($sk,$sn['cnt'],$ZbmgwPpRiaBbjR9P,$lKYJ6QOoLtm8_Ze4uz3); $kgQxFsRGfcjLoo9_[]=array( 'folder'=>str_replace('/',' ',$sk), 'cnt'=>$sn['cnt'], 'cntmulti'=>$sn['cnt']>1, 'level'=>$ZbmgwPpRiaBbjR9P, 'alevel'=>$ZbmgwPpRiaBbjR9P?range(1,$ZbmgwPpRiaBbjR9P):array(), 'level100'=>100-$ZbmgwPpRiaBbjR9P, 'pages'=>$Y31Y74dyLIO); } if($sn['elem']) LDd7bqg5_C($sn['elem'],$ZbmgwPpRiaBbjR9P+1,$w1CLxCPhUy9qzof); } if($ZbmgwPpRiaBbjR9P == 0 && $fqxdyrTNEz) lPT6M7drPhQPL($fqxdyrTNEz, $kgQxFsRGfcjLoo9_); } $w1CLxCPhUy9qzof=0; LDd7bqg5_C($baLr5ayef['elem'],0,$w1CLxCPhUy9qzof); include kxesmZvVXn.'class.templates.inc.php'; aRjeSjk24(array('cmd'=> 'info','id' => 'percprog2','')); function lPT6M7drPhQPL($ht, $hv) { global $grab_parameters, $LG9QHtb6yK6qR5InZ, $urls_completed, $o6tTsvNFXN, $n5r9fzJl7ca, $ICDtF9k5qRIaFX, $C8YeeJvXHpz7ff; $WnpHNxdaTuMquF7 = $C8YeeJvXHpz7ff['runstate']['charset']; $cf9WUidVAtiud = new gYT2DH5A_("pages/mods/"); $cf9WUidVAtiud->SCWLfn0FOY(vHwDy8urTbxymoY7y(yCwTqe5GDcta, 'sitemap_tpl.html')); $iM0z82gnwPfmE0lYG = $grab_parameters['xs_htmlname']; $it9ClCc0l = basename($grab_parameters['xs_htmlname']); $AjohmfCMR6XNcb = ''; $AbOnA9dFxAZFArqSEam=array(); if($n5r9fzJl7ca>1) { for($i1=0;$i1<$n5r9fzJl7ca;$i1++) { $txVg8HqejS_NN5dKj = ZW04gbhF9A8P($i1+1,$it9ClCc0l,true); $AjohmfCMR6XNcb .= ($i1==$o6tTsvNFXN)?' ['.($i1+1).']': ' <a href="'.$txVg8HqejS_NN5dKj.'">'.($i1+1).'</a>'; $AbOnA9dFxAZFArqSEam[]=array('current'=>($i1==$o6tTsvNFXN),'link'=>$txVg8HqejS_NN5dKj,'num'=>$i1+1); } $AjohmfCMR6XNcb = '<span class="pager">'.$AjohmfCMR6XNcb.'</span>'; } $YGXNP4q99 = "<table cellpadding=\"0\" border=\"0\">\n".$ht."\n</table>\n"; $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('slots',$hv); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('LASTUPDATE',date($grab_parameters['xs_dateformat']?$grab_parameters['xs_dateformat']:'Y, F j')); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('NOBRAND',$grab_parameters['xs_nobrand']?1:0); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('PCHARSET',$WnpHNxdaTuMquF7); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('TOPURL',$LG9QHtb6yK6qR5InZ); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('PAGE',$n5r9fzJl7ca?' Page '.($o6tTsvNFXN+1):''); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('PAGES',$AjohmfCMR6XNcb); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('APAGER',$AbOnA9dFxAZFArqSEam); $cf9WUidVAtiud->Jzvvi5906fScvwvc6H('TOTALURLS',count($urls_completed)); $E09KaZe4IW = $cf9WUidVAtiud->parse(); $E09KaZe4IW = preg_replace( array('#%SITEMAP%#', '#%LASTUPDATE%#', '#%TOPURL%#', '#%PAGE%#', '#%PAGER%#', '#%TOTALURLS%#'), array($YGXNP4q99, date('Y, F j'), $LG9QHtb6yK6qR5InZ, $n5r9fzJl7ca?' Page '.($o6tTsvNFXN+1):'', $AjohmfCMR6XNcb, count($urls_completed)), $E09KaZe4IW); $txVg8HqejS_NN5dKj = $n5r9fzJl7ca>1 ? ZW04gbhF9A8P($o6tTsvNFXN+1, $iM0z82gnwPfmE0lYG, true) : $iM0z82gnwPfmE0lYG; $pf = cVhR96lmkjBRF($txVg8HqejS_NN5dKj, 'w'); if(!$pf) $ICDtF9k5qRIaFX[] = $txVg8HqejS_NN5dKj; fwrite($pf, $E09KaZe4IW); fclose($pf); } 



































































































